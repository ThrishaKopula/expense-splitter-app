{"ast":null,"code":"var _jsxFileName = \"/Users/thrishakopula/Desktop/Projects/expense-splitter-app/expense-splitter-frontend/src/components/Dashboard.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { getExpenses, createExpense, deleteExpense } from \"../api/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Dashboard({\n  user,\n  onLogout\n}) {\n  _s();\n  const queryClient = useQueryClient();\n  const [desc, setDesc] = useState(\"\");\n  const [amount, setAmount] = useState(\"\");\n\n  // Fetch expenses for current user\n  const {\n    data: expenses = [],\n    isLoading,\n    error\n  } = useQuery([\"expenses\", user === null || user === void 0 ? void 0 : user.id], () => getExpenses(user.id), {\n    enabled: !!user\n  } // only fetch if user exists\n  );\n\n  // Mutation to add expense\n  const addMutation = useMutation({\n    mutationFn: newExpense => createExpense(newExpense),\n    onSuccess: () => {\n      queryClient.invalidateQueries([\"expenses\", user.id]);\n      setDesc(\"\");\n      setAmount(\"\");\n    }\n  });\n\n  // Mutation to delete expense\n  const deleteMutation = useMutation({\n    mutationFn: id => deleteExpense(id),\n    onSuccess: () => queryClient.invalidateQueries([\"expenses\", user.id])\n  });\n  const handleAddExpense = e => {\n    e.preventDefault();\n    if (!desc || !amount) return;\n    addMutation.mutate({\n      description: desc,\n      amount: parseFloat(amount),\n      date: new Date().toISOString(),\n      userId: user.id\n    });\n  };\n  if (!user) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Please log in to see your dashboard.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 21\n  }, this);\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading expenses...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: [\"Error loading expenses: \", error.message]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"2rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Welcome, \", user.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Your Balance: $\", expenses.reduce((sum, e) => sum + e.amount, 0)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"1rem\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleAddExpense,\n        style: {\n          display: \"flex\",\n          gap: \"0.5rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Description\",\n          value: desc,\n          onChange: e => setDesc(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          placeholder: \"Amount\",\n          value: amount,\n          onChange: e => setAmount(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: addMutation.isLoading ? \"Adding...\" : \"Add Expense\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      style: {\n        marginTop: \"1rem\"\n      },\n      children: expenses.map(e => /*#__PURE__*/_jsxDEV(\"li\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          margin: \"0.5rem 0\"\n        },\n        children: [e.description, \" - $\", e.amount.toFixed(2), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deleteMutation.mutate(e.id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)]\n      }, e.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"1GhRmYI7tuSQPfjVC2Si7THHPnw=\", false, function () {\n  return [useQueryClient, useQuery, useMutation, useMutation];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["useState","useQuery","useMutation","useQueryClient","getExpenses","createExpense","deleteExpense","jsxDEV","_jsxDEV","Dashboard","user","onLogout","_s","queryClient","desc","setDesc","amount","setAmount","data","expenses","isLoading","error","id","enabled","addMutation","mutationFn","newExpense","onSuccess","invalidateQueries","deleteMutation","handleAddExpense","e","preventDefault","mutate","description","parseFloat","date","Date","toISOString","userId","children","fileName","_jsxFileName","lineNumber","columnNumber","message","style","padding","display","justifyContent","name","onClick","reduce","sum","marginTop","onSubmit","gap","type","placeholder","value","onChange","target","map","margin","toFixed","_c","$RefreshReg$"],"sources":["/Users/thrishakopula/Desktop/Projects/expense-splitter-app/expense-splitter-frontend/src/components/Dashboard.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { getExpenses, createExpense, deleteExpense } from \"../api/api\";\n\nfunction Dashboard({ user, onLogout }) {\n  const queryClient = useQueryClient();\n  const [desc, setDesc] = useState(\"\");\n  const [amount, setAmount] = useState(\"\");\n\n  // Fetch expenses for current user\n  const { data: expenses = [], isLoading, error } = useQuery(\n    [\"expenses\", user?.id],\n    () => getExpenses(user.id),\n    { enabled: !!user } // only fetch if user exists\n  );\n\n  // Mutation to add expense\n  const addMutation = useMutation({\n    mutationFn: (newExpense) => createExpense(newExpense),\n    onSuccess: () => {\n      queryClient.invalidateQueries([\"expenses\", user.id]);\n      setDesc(\"\");\n      setAmount(\"\");\n    },\n  });\n\n  // Mutation to delete expense\n  const deleteMutation = useMutation({\n    mutationFn: (id) => deleteExpense(id),\n    onSuccess: () => queryClient.invalidateQueries([\"expenses\", user.id]),\n  });\n\n  const handleAddExpense = (e) => {\n    e.preventDefault();\n    if (!desc || !amount) return;\n    addMutation.mutate({\n      description: desc,\n      amount: parseFloat(amount),\n      date: new Date().toISOString(),\n      userId: user.id,\n    });\n  };\n\n  if (!user) return <p>Please log in to see your dashboard.</p>;\n  if (isLoading) return <p>Loading expenses...</p>;\n  if (error) return <p>Error loading expenses: {error.message}</p>;\n\n  return (\n    <div style={{ padding: \"2rem\" }}>\n      <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n        <h2>Welcome, {user.name}</h2>\n        <button onClick={onLogout}>Logout</button>\n      </div>\n\n      <h3>Your Balance: ${expenses.reduce((sum, e) => sum + e.amount, 0)}</h3>\n\n      <div style={{ marginTop: \"1rem\" }}>\n        <form onSubmit={handleAddExpense} style={{ display: \"flex\", gap: \"0.5rem\" }}>\n          <input\n            type=\"text\"\n            placeholder=\"Description\"\n            value={desc}\n            onChange={(e) => setDesc(e.target.value)}\n          />\n          <input\n            type=\"number\"\n            placeholder=\"Amount\"\n            value={amount}\n            onChange={(e) => setAmount(e.target.value)}\n          />\n          <button type=\"submit\">\n            {addMutation.isLoading ? \"Adding...\" : \"Add Expense\"}\n          </button>\n        </form>\n      </div>\n\n      <ul style={{ marginTop: \"1rem\" }}>\n        {expenses.map((e) => (\n          <li key={e.id} style={{ display: \"flex\", justifyContent: \"space-between\", margin: \"0.5rem 0\" }}>\n            {e.description} - ${e.amount.toFixed(2)}\n            <button onClick={() => deleteMutation.mutate(e.id)}>Delete</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,QAAQ,EAAEC,WAAW,EAAEC,cAAc,QAAQ,uBAAuB;AAC7E,SAASC,WAAW,EAAEC,aAAa,EAAEC,aAAa,QAAQ,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvE,SAASC,SAASA,CAAC;EAAEC,IAAI;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACrC,MAAMC,WAAW,GAAGV,cAAc,CAAC,CAAC;EACpC,MAAM,CAACW,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACgB,MAAM,EAAEC,SAAS,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;;EAExC;EACA,MAAM;IAAEkB,IAAI,EAAEC,QAAQ,GAAG,EAAE;IAAEC,SAAS;IAAEC;EAAM,CAAC,GAAGpB,QAAQ,CACxD,CAAC,UAAU,EAAES,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEY,EAAE,CAAC,EACtB,MAAMlB,WAAW,CAACM,IAAI,CAACY,EAAE,CAAC,EAC1B;IAAEC,OAAO,EAAE,CAAC,CAACb;EAAK,CAAC,CAAC;EACtB,CAAC;;EAED;EACA,MAAMc,WAAW,GAAGtB,WAAW,CAAC;IAC9BuB,UAAU,EAAGC,UAAU,IAAKrB,aAAa,CAACqB,UAAU,CAAC;IACrDC,SAAS,EAAEA,CAAA,KAAM;MACfd,WAAW,CAACe,iBAAiB,CAAC,CAAC,UAAU,EAAElB,IAAI,CAACY,EAAE,CAAC,CAAC;MACpDP,OAAO,CAAC,EAAE,CAAC;MACXE,SAAS,CAAC,EAAE,CAAC;IACf;EACF,CAAC,CAAC;;EAEF;EACA,MAAMY,cAAc,GAAG3B,WAAW,CAAC;IACjCuB,UAAU,EAAGH,EAAE,IAAKhB,aAAa,CAACgB,EAAE,CAAC;IACrCK,SAAS,EAAEA,CAAA,KAAMd,WAAW,CAACe,iBAAiB,CAAC,CAAC,UAAU,EAAElB,IAAI,CAACY,EAAE,CAAC;EACtE,CAAC,CAAC;EAEF,MAAMQ,gBAAgB,GAAIC,CAAC,IAAK;IAC9BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAAClB,IAAI,IAAI,CAACE,MAAM,EAAE;IACtBQ,WAAW,CAACS,MAAM,CAAC;MACjBC,WAAW,EAAEpB,IAAI;MACjBE,MAAM,EAAEmB,UAAU,CAACnB,MAAM,CAAC;MAC1BoB,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MAC9BC,MAAM,EAAE7B,IAAI,CAACY;IACf,CAAC,CAAC;EACJ,CAAC;EAED,IAAI,CAACZ,IAAI,EAAE,oBAAOF,OAAA;IAAAgC,QAAA,EAAG;EAAoC;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAG,CAAC;EAC7D,IAAIxB,SAAS,EAAE,oBAAOZ,OAAA;IAAAgC,QAAA,EAAG;EAAmB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAG,CAAC;EAChD,IAAIvB,KAAK,EAAE,oBAAOb,OAAA;IAAAgC,QAAA,GAAG,0BAAwB,EAACnB,KAAK,CAACwB,OAAO;EAAA;IAAAJ,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAI,CAAC;EAEhE,oBACEpC,OAAA;IAAKsC,KAAK,EAAE;MAAEC,OAAO,EAAE;IAAO,CAAE;IAAAP,QAAA,gBAC9BhC,OAAA;MAAKsC,KAAK,EAAE;QAAEE,OAAO,EAAE,MAAM;QAAEC,cAAc,EAAE;MAAgB,CAAE;MAAAT,QAAA,gBAC/DhC,OAAA;QAAAgC,QAAA,GAAI,WAAS,EAAC9B,IAAI,CAACwC,IAAI;MAAA;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAC7BpC,OAAA;QAAQ2C,OAAO,EAAExC,QAAS;QAAA6B,QAAA,EAAC;MAAM;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACvC,CAAC,eAENpC,OAAA;MAAAgC,QAAA,GAAI,iBAAe,EAACrB,QAAQ,CAACiC,MAAM,CAAC,CAACC,GAAG,EAAEtB,CAAC,KAAKsB,GAAG,GAAGtB,CAAC,CAACf,MAAM,EAAE,CAAC,CAAC;IAAA;MAAAyB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAExEpC,OAAA;MAAKsC,KAAK,EAAE;QAAEQ,SAAS,EAAE;MAAO,CAAE;MAAAd,QAAA,eAChChC,OAAA;QAAM+C,QAAQ,EAAEzB,gBAAiB;QAACgB,KAAK,EAAE;UAAEE,OAAO,EAAE,MAAM;UAAEQ,GAAG,EAAE;QAAS,CAAE;QAAAhB,QAAA,gBAC1EhC,OAAA;UACEiD,IAAI,EAAC,MAAM;UACXC,WAAW,EAAC,aAAa;UACzBC,KAAK,EAAE7C,IAAK;UACZ8C,QAAQ,EAAG7B,CAAC,IAAKhB,OAAO,CAACgB,CAAC,CAAC8B,MAAM,CAACF,KAAK;QAAE;UAAAlB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1C,CAAC,eACFpC,OAAA;UACEiD,IAAI,EAAC,QAAQ;UACbC,WAAW,EAAC,QAAQ;UACpBC,KAAK,EAAE3C,MAAO;UACd4C,QAAQ,EAAG7B,CAAC,IAAKd,SAAS,CAACc,CAAC,CAAC8B,MAAM,CAACF,KAAK;QAAE;UAAAlB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5C,CAAC,eACFpC,OAAA;UAAQiD,IAAI,EAAC,QAAQ;UAAAjB,QAAA,EAClBhB,WAAW,CAACJ,SAAS,GAAG,WAAW,GAAG;QAAa;UAAAqB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,eAENpC,OAAA;MAAIsC,KAAK,EAAE;QAAEQ,SAAS,EAAE;MAAO,CAAE;MAAAd,QAAA,EAC9BrB,QAAQ,CAAC2C,GAAG,CAAE/B,CAAC,iBACdvB,OAAA;QAAesC,KAAK,EAAE;UAAEE,OAAO,EAAE,MAAM;UAAEC,cAAc,EAAE,eAAe;UAAEc,MAAM,EAAE;QAAW,CAAE;QAAAvB,QAAA,GAC5FT,CAAC,CAACG,WAAW,EAAC,MAAI,EAACH,CAAC,CAACf,MAAM,CAACgD,OAAO,CAAC,CAAC,CAAC,eACvCxD,OAAA;UAAQ2C,OAAO,EAAEA,CAAA,KAAMtB,cAAc,CAACI,MAAM,CAACF,CAAC,CAACT,EAAE,CAAE;UAAAkB,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA,GAF5Db,CAAC,CAACT,EAAE;QAAAmB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAGT,CACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAEV;AAAChC,EAAA,CAlFQH,SAAS;EAAA,QACIN,cAAc,EAKgBF,QAAQ,EAOtCC,WAAW,EAURA,WAAW;AAAA;AAAA+D,EAAA,GAvB3BxD,SAAS;AAoFlB,eAAeA,SAAS;AAAC,IAAAwD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}